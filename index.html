<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carelyst - Your Digital Health Partner</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
    /* Main Theme Colors */
    --bg-dark: #0d0829;
    --bg-soft: #0a2390;
    --primary-green: #22E0A1;
    --primary-lavender: #C7A4FF;
    --text-light: #FFFFFF;
    --text-muted: #929292;
    --border-color: #3A3C4A;
    
    /* Auth Modal Specific Colors */
    --auth-branding-bg: #2A2F4F;
    --auth-form-bg: #1A1F63;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
html { scroll-behavior: smooth; }
body { background-color: var(--bg-dark); color: var(--text-light); overflow-x: hidden; cursor: none; }
.container { width: 90%; max-width: 1200px; margin: 0 auto; }
.section-padding { padding: 100px 0; }
.section-title { font-size: 2.5rem; text-align: center; margin-bottom: 60px; font-weight: 700; }
a, button { cursor: none; }

/* --- Buttons --- */
.btn { padding: 12px 24px; border: none; border-radius: 12px; font-weight: 600; transition: all 0.3s ease; }
.btn-primary { background-color: var(--bg-soft); color: var(--text-light); }
.btn-primary:hover { background-color: #3e4257; }
.btn-cta { background: linear-gradient(90deg, var(--primary-lavender), var(--primary-green)); color: var(--bg-dark); font-size: 1.1rem; padding: 15px 35px; }
.btn-cta:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(34, 224, 161, 0.2); }

/* --- Animations --- */
.fade-in, .fade-in-delay, .fade-in-delay-2, .fade-in-delay-3 { animation: fadeIn 1s ease-out forwards; opacity: 0; transform: translateY(20px); }
.fade-in-delay { animation-delay: 0.2s; }
.fade-in-delay-2 { animation-delay: 0.4s; }
.fade-in-delay-3 { animation-delay: 0.6s; }
@keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

/* --- ELEMENT 1: Fluid Mouse Follower --- */
.cursor, .cursor-dot { position: fixed; top: 0; left: 0; transform: translate(-50%, -50%); border-radius: 50%; pointer-events: none; z-index: 10000; }
.cursor { width: 40px; height: 40px; border: 2px solid var(--primary-green); transition: width 0.3s, height 0.3s, background-color 0.3s; }
.cursor-dot { width: 8px; height: 8px; background-color: var(--primary-green); }
.cursor.hovered { width: 60px; height: 60px; background-color: rgba(128, 209, 182, 0.1); }

/* --- ELEMENT 2: Anatomy Scan Loader --- */
#loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-dark); z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.5s 0.5s ease-out, visibility 0.5s 0.5s ease-out; }
#loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
.scanner-container { position: relative; width: 300px; height: 400px; display: flex; justify-content: center; align-items: center; margin-bottom: 30px; }
.human-figure { height: 100%; opacity: 0.6; animation: fadeInFigure 2s ease-in-out; }
@keyframes fadeInFigure { from { opacity: 0; } to { opacity: 0.6; } }
.scan-line { position: absolute; width: 150%; height: 3px; background: linear-gradient(90deg, transparent, var(--primary-green), transparent); box-shadow: 0 0 15px var(--primary-green); animation: scan 4s infinite alternate ease-in-out; z-index: 2; }
@keyframes scan { from { top: 0; } to { top: 100%; } }
.data-graph { position: absolute; height: 90%; width: 100px; top: 5%; opacity: 0.2; overflow: visible; }
.data-graph.left { left: -60px; }
.data-graph.right { right: -60px; }
.graph-path { stroke-width: 4; fill: none; stroke: url(#graph-gradient); stroke-dasharray: 20 40; stroke-linecap: round; animation: moveDash 1s infinite linear; }
@keyframes moveDash { from { stroke-dashoffset: 0; } to { stroke-dashoffset: -60; } }
.data-points { position: absolute; width: 100%; height: 100%; }
.data-point { position: absolute; width: 4px; height: 4px; background-color: var(--primary-lavender); border-radius: 50%; box-shadow: 0 0 5px var(--primary-lavender); animation: flicker 1.5s infinite alternate; }
@keyframes flicker { from { opacity: 0; } to { opacity: 1; } }
.loader-text-wrapper { text-align: center; }
.loader-text { font-size: 1.1rem; letter-spacing: 2px; color: var(--text-muted); text-transform: uppercase; }
.loader-counter { margin-top: 15px; font-size: 1.5rem; font-weight: 600; color: var(--text-light); }

/* --- Header & Nav Toggle --- */
#main-header { position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; padding: 15px 0; background: rgba(13, 8, 41, 0.8); backdrop-filter: blur(10px); }
#main-header .container { display: flex; justify-content: space-between; align-items: center; }
.logo-link { display: flex; align-items: center; text-decoration: none; }
.logo-link img { height: 40px; }
.logo-link span { color: var(--text-light); font-size: 1.5rem; font-weight: 700; margin-left: 10px; }
.header-controls { display: flex; align-items: center; gap: 20px; }
.menu-toggle { width: 30px; height: 24px; display: flex; flex-direction: column; justify-content: space-between; background: none; border: none; }
.menu-toggle span { width: 100%; height: 3px; background-color: var(--text-light); border-radius: 3px; transition: all 0.3s ease; }

/* --- ELEMENT 3: Full-Screen Navigation --- */
#full-screen-nav { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-dark); z-index: 5000; display: flex; justify-content: center; align-items: center; transform: translateY(-100%); transition: transform 0.6s cubic-bezier(0.76, 0, 0.24, 1); }
#full-screen-nav.active { transform: translateY(0); }
#full-screen-nav ul { list-style: none; text-align: center; }
#full-screen-nav ul li { margin: 10px 0; overflow: hidden; }
#full-screen-nav ul li a { font-size: 4rem; font-weight: 700; color: var(--text-light); text-decoration: none; display: inline-block; transform: translateY(100%); transition: transform 0.5s; }
#full-screen-nav.active ul li a { transform: translateY(0); }
#full-screen-nav.active ul li:nth-child(2) a { transition-delay: 0.05s; }
#full-screen-nav.active ul li:nth-child(3) a { transition-delay: 0.1s; }
#full-screen-nav.active ul li:nth-child(4) a { transition-delay: 0.15s; }
.menu-close-btn { position: absolute; top: 30px; right: 5%; font-size: 3rem; color: var(--text-light); background: none; border: none; }

/* --- Hero Section --- */
#hero { position: relative; height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; overflow: hidden; background-color: var(--bg-dark); }
#particle-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
.hero-content { position: relative; z-index: 2; max-width: 800px; }
#hero h1 { font-size: 4rem; line-height: 1.2; margin-bottom: 20px; text-shadow: 0 0 20px rgba(0,0,0,0.5); }
#hero p { font-size: 1.2rem; color: var(--text-muted); margin-bottom: 40px; text-shadow: 0 0 10px rgba(0,0,0,0.5); }

/* --- Features Section --- */
.features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
.feature-card { background-color: var(--bg-soft); padding: 40px 30px; border-radius: 20px; text-align: center; border: 1px solid var(--border-color); transition: transform 0.3s, box-shadow 0.3s; }
.feature-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
.feature-card img { height: 120px; margin-bottom: 20px; }
.feature-card h3 { margin-bottom: 15px; font-size: 1.4rem; }
.feature-card p { color: var(--text-muted); line-height: 1.6; }

/* --- ELEMENT 4: Looping Marquee --- */
#pharmacies { background-color: var(--bg-soft); }
.marquee { width: 100%; overflow: hidden; }
.marquee-content { display: flex; animation: scroll 30s linear infinite; }
.marquee:hover .marquee-content { animation-play-state: paused; }
.pharmacy-logo { flex-shrink: 0; width: 250px; display: flex; justify-content: center; align-items: center; margin: 0 40px; }
.pharmacy-logo img { max-width: 150px; filter: grayscale(1) brightness(5); opacity: 0.8; transition: all 0.3s; }
.pharmacy-logo:hover img { filter: grayscale(0) brightness(1); }
@keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }

/* --- ELEMENT 5: Specialist List Hover Effect --- */
.specialist-list-container { position: relative; }
#specialist-list { list-style: none; border-top: 1px solid var(--border-color); }
.specialist-item { padding: 30px 0; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; transition: background-color 0.4s; }
.specialist-item:hover { background-color: rgba(34, 224, 161, 0.05); }
.specialist-item span { font-size: 3rem; font-weight: 600; transition: color 0.3s; }
.specialist-item p { font-size: 1.2rem; color: var(--text-muted); }
#specialist-image-preview { position: fixed; width: 300px; height: 300px; border-radius: 50%; overflow: hidden; pointer-events: none; opacity: 0; transform: translate(-50%, -50%) scale(0.8); transition: opacity 0.4s, transform 0.4s; z-index: 9998; }
#specialist-image-preview img { width: 100%; height: 100%; object-fit: cover; }

/* --- Footer --- */
#main-footer { background-color: var(--bg-soft); padding: 40px 0; text-align: center; }

/* --- General Modal Styles --- */
#modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); z-index: 8000; transition: opacity 0.3s; }
.modal-container { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95); z-index: 8001; transition: all 0.3s ease-out; }
.modal-container.hidden, #modal-overlay.hidden { opacity: 0; pointer-events: none; }
.modal-container:not(.hidden) { transform: translate(-50%, -50%) scale(1); }

/* --- Auth Modal (Split Screen) Styles --- */
#auth-modal { width: 90%; max-width: 900px; height: auto; padding: 0; background: none; border: none; box-shadow: none; }
.auth-card { display: flex; width: 100%; border-radius: 20px; overflow: hidden; background-color: var(--auth-form-bg); border: 1px solid var(--border-color); box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
.form-branding { flex: 0 0 45%; position: relative; padding: 40px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background-color: var(--auth-branding-bg); overflow: hidden; }
.video-background-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
.video-background-wrapper::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(42, 47, 79, 0.5); }
.video-background-wrapper video { width: 100%; height: 100%; object-fit: cover; }
.branding-content { position: relative; z-index: 2; }
.branding-content img { width: 60px; margin-bottom: 20px; }
.branding-content h2 { font-size: 2.5rem; font-weight: 700; line-height: 1.2; margin-bottom: 15px; }
.branding-content p { color: var(--text-muted); }
.form-content { flex: 1 1 55%; padding: 40px 50px; position: relative; display: flex; flex-direction: column; justify-content: center; background-color: var(--auth-form-bg); }
.form-view { display: none; animation: fadeInForm 0.5s ease-out; }
.form-view.active { display: block; }
@keyframes fadeInForm { from { opacity: 0; } to { opacity: 1; } }
.form-content .modal-close-btn { position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 1.5rem; color: var(--text-muted); transition: all 0.3s; }
.form-content .modal-close-btn:hover { color: var(--text-light); transform: rotate(90deg); }
.form-content h3 { text-align: left; font-size: 1.8rem; margin-bottom: 40px; }
.form-group { position: relative; margin-bottom: 35px; }
.form-group input { width: 100%; padding: 10px 0; background: transparent; border: none; border-bottom: 1px solid var(--border-color); color: var(--text-light); font-size: 1rem; outline: none; }
.form-group label { position: absolute; top: 10px; left: 0; color: var(--text-muted); pointer-events: none; transition: all 0.3s ease; }
.form-group input:focus + label, .form-group input:not(:placeholder-shown) + label { top: -15px; font-size: 0.8rem; color: var(--primary-green); }
.form-group input:focus { border-bottom-color: var(--primary-green); }
.form-content form .btn-cta { width: 100%; margin-top: 10px; padding: 15px; border-radius: 12px; background: linear-gradient(90deg, var(--primary-lavender), var(--primary-green)); color: var(--bg-dark); }
.auth-switch { text-align: center; margin-top: 25px; font-size: 0.9rem; color: var(--text-muted); }
.auth-switch a { color: var(--primary-green); font-weight: 600; text-decoration: none; }

/* --- Symptom Checker Modal Styles --- */
#symptom-modal { width: 90%; max-width: 900px; padding: 40px; background-color: var(--bg-soft); border-radius: 20px; border: 1px solid var(--border-color); }
#symptom-checker-interactive { text-align: center; }
#symptom-checker-interactive h2 { margin-bottom: 15px; }
#symptom-checker-interactive p { color: var(--text-muted); max-width: 500px; margin: 0 auto 40px; }
.symptom-step { display: none; }
.symptom-step.active { display: block; animation: fadeInForm 0.5s; }
.category-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
.category-card { background-color: var(--bg-dark); border: 1px solid var(--border-color); border-radius: 12px; padding: 30px 20px; transition: all 0.3s; }
.category-card:hover { transform: translateY(-8px); border-color: var(--primary-green); }
.category-card .icon { font-size: 2.5rem; margin-bottom: 15px; }
.symptom-tags-container { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 40px; }
.symptom-tag { background-color: var(--bg-dark); color: var(--text-light); padding: 10px 20px; border-radius: 50px; border: 1px solid var(--border-color); transition: all 0.2s; }
.symptom-tag.active { background-color: var(--primary-green); color: var(--bg-dark); border-color: var(--primary-green); transform: scale(1.05); }
#analyze-btn[disabled] { opacity: 0.5; cursor: not-allowed; }
#analysis-results { text-align: left; margin: 30px 0; padding: 20px; background-color: var(--bg-dark); border-radius: 12px; }
#analysis-results h3 { margin-bottom: 15px; color: var(--primary-green); }
#initial-advice-text { min-height: 80px; line-height: 1.7; color: var(--text-muted); }
.typing-caret { display: inline-block; width: 8px; height: 1.2em; background-color: var(--primary-green); animation: blink 1s infinite; vertical-align: middle; }
@keyframes blink { 50% { opacity: 0; } }
#restart-checker { margin-top: 20px; }

/* Responsive Adjustments */
@media (max-width: 850px) {
    .form-branding { display: none; }
    .auth-card { flex-direction: column; }
    #auth-modal { max-width: 450px; }
    .specialist-item span { font-size: 2rem; }
}
    </style>
</head>
<body>
    

    <!-- CURSOR -->
    <div class="cursor"></div>
    <div class="cursor-dot"></div>

    <!-- ANATOMY SCAN LOADER -->
    <div id="loader">
        <div class="scanner-container">
            <div class="scan-line"></div>
            <img src="human-scan.png" class="human-figure" alt="Anatomy Scan">
            <svg class="data-graph left" viewBox="0 0 100 400"><path class="graph-path" d="M 90 0 C 10 100, 10 300, 90 400" /></svg>
            <svg class="data-graph right" viewBox="0 0 100 400"><path class="graph-path" d="M 10 0 C 90 100, 90 300, 10 400" /></svg>
            <div class="data-points"></div>
        </div>
        <div class="loader-text-wrapper">
            <div class="loader-text">ANALYZING HEALTH METRICS...</div>
            <div class="loader-counter"><span id="load-percentage">0</span>%</div>
        </div>
    </div>
    
    <!-- HEADER -->
    <header id="main-header">
        <div class="container">
            <!-- FIXED: Corrected logo path -->
            <a href="#" class="logo-link"><img src="logo.svg.svg" alt="Carelyst Logo"><span>Carelyst</span></a>
            <div class="header-controls">
                <button class="btn btn-primary" id="auth-btn-header">Signup</button>
                <button class="menu-toggle" id="menu-toggle"><span></span><span></span><span></span></button>
            </div>
        </div>
    </header>

    <!-- FULL-SCREEN NAVIGATION -->
    <nav id="full-screen-nav">
        <button class="menu-close-btn">×</button>
        <ul>
            <li><a href="#hero">Home</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#pharmacies">Partners</a></li>
            <li><a href="#specialists">Specialists</a></li>
        </ul>
    </nav>

    <main>
        <!-- HERO SECTION -->
       <section id="hero">
            <canvas id="particle-canvas"></canvas>
            <div class="container hero-content">
                <h1 class="fade-in">Intelligent Health Guidance, Instantly.</h1>
                <p class="fade-in-delay">Stop guessing. Start knowing.</p>
                <div class="fade-in-delay-2">
                    <button class="btn btn-cta" id="open-symptom-checker-btn-main">Check Symptoms Now</button>
                </div>
            </div>
        </section>
        
        <!-- FEATURES SECTION -->
        <section id="features" class="section-padding">
             <div class="container">
                <h2 class="section-title fade-in">A New Standard in Personal Healthcare</h2>
                <div class="features-grid">
                    <div class="feature-card fade-in">
                        <img src="icon-symptoms.png" alt="Symptom Checker Icon">
                        <h3>Guided Symptom Checker</h3>
                        <p>Our step-by-step tool helps you identify potential issues with clarity and confidence.</p>
                    </div>
                    <div class="feature-card fade-in-delay">
                        <img src="icon-specialist.png" alt="Find Specialists Icon">
                        <h3>Find Top Specialists</h3>
                        <p>Instantly connect with a curated list of trusted doctors based on your needs.</p>
                    </div>
                    <div class="feature-card fade-in-delay-2">
                        <img src="icon-records.png" alt="Health Records Icon">
                        <h3>Secure Health Records</h3>
                        <p>Keep your medical history safe and accessible anytime, anywhere (coming soon).</p>
                    </div>
                     <div class="feature-card fade-in-delay-3">
                        <img src="icon-pharmacy.png" alt="Pharmacy Connect Icon">
                        <h3>Pharmacy Connect</h3>
                        <p>Get prescriptions sent directly to trusted online pharmacies for fast delivery.</p>
                    </div>
                </div>
            </div>
        </section
        <!-- MARQUEE SECTION -->
        <section id="pharmacies" class="section-padding">
            <div class="container">
                <h2 class="section-title fade-in">Our Trusted Pharmacy Partners</h2>
                <div class="marquee"><div class="marquee-content">
                    <div class="pharmacy-logo"><img src="pharmacy1.png" alt="PharmEasy"></div>
                    <div class="pharmacy-logo"><img src="pharmacy2.png" alt="Netmeds"></div>
                </div></div>
            </div>
        </section>

        <!-- SPECIALISTS SECTION -->
        <section id="specialists" class="section-padding">
            <div class="container">
                <h2 class="section-title fade-in">Connect With Our Specialists</h2>
                <div class="specialist-list-container">
                    <ul id="specialist-list"></ul>
                    <div id="specialist-image-preview"></div>
                </div>
            </div>
        </section>
    </main>
    
    <footer id="main-footer"><div class="container"><p>© 2024 Carelyst. All Rights Reserved.</p></div></footer>

    <!-- MODALS SECTION -->
    <div id="modal-overlay" class="hidden"></div>
    
    <!-- AUTH MODAL -->
    <div id="auth-modal" class="modal-container hidden">
        <div class="auth-card">
            <div class="form-branding">
                <div class="video-background-wrapper"><video playsinline autoplay muted loop><source src="videos/auth-video.mp4" type="video/mp4"></video></div>
                <!-- FIXED: Corrected logo path -->
                <div class="branding-content"><img src="logo.svg.svg" alt="Carelyst Logo"><h2>Welcome Back</h2><p>Login to access your health dashboard.</p></div>
            </div>
            <div class="form-content">
                <button class="modal-close-btn">×</button>
                <div id="login-view" class="form-view active">
                    <h3>Login to Your Account</h3>
                    <form id="login-form">
                        <div class="form-group"><input type="email" id="login-email" required placeholder=" "><label for="login-email">Email Address</label></div>
                        <div class="form-group"><input type="password" id="login-password" required placeholder=" "><label for="login-password">Password</label></div>
                        <button type="submit" class="btn btn-cta">Login</button>
                    </form>
                    <p class="auth-switch">Don't have an account? <a href="#" id="show-signup">Sign up now</a></p>
                </div>
                <div id="signup-view" class="form-view">
                    <h3>Create Your Account</h3>
                    <form id="signup-form">
                        <div class="form-group"><input type="text" id="signup-name" required placeholder=" "><label for="signup-name">Full Name</label></div>
                        <div class="form-group"><input type="email" id="signup-email" required placeholder=" "><label for="signup-email">Email Address</label></div>
                        <div class="form-group"><input type="password" id="signup-password" required placeholder=" "><label for="signup-password">Create Password</label></div>
                        <button type="submit" class="btn btn-cta">Create Account</button>
                    </form>
                    <p class="auth-switch">Already have an account? <a href="#" id="show-login">Login here</a></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- SYMPTOM CHECKER MODAL -->
    <div id="symptom-modal" class="modal-container hidden">
        <button class="modal-close-btn">×</button>
        <div id="symptom-checker-interactive">
            <div class="symptom-step active" id="step-1">
                <h2>Where are you feeling the discomfort?</h2>
                <p>Select the area that best describes your primary symptom.</p>
                <div class="category-grid">
                    <div class="category-card" data-category="head"><div class="icon"></div><h3>Head & Neck</h3></div>
                    <div class="category-card" data-category="chest"><div class="icon"></div><h3>Chest & Lungs</h3></div>
                    <div class="category-card" data-category="general"><div class="icon"></div><h3>General & Body</h3></div>
                </div>
            </div>
            <div class="symptom-step" id="step-2"></div>
            <div class="symptom-step" id="step-3"></div>
        </div>
    </div>

    <script>
        
document.addEventListener('DOMContentLoaded', () => {

    // --- INTERACTIVE PARTICLE HERO BACKGROUND ---
    const canvas = document.getElementById('particle-canvas');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particlesArray;
        const mouse = { x: null, y: null, radius: (canvas.height / 100) * (canvas.width / 100) };
        window.addEventListener('mousemove', (event) => { mouse.x = event.x; mouse.y = event.y; });
        class Particle {
            constructor(x, y, directionX, directionY, size, color) { this.x = x; this.y = y; this.directionX = directionX; this.directionY = directionY; this.size = size; this.color = color; }
            draw() { ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = this.color; ctx.fill(); }
            update() {
                if (this.x > canvas.width || this.x < 0) { this.directionX = -this.directionX; }
                if (this.y > canvas.height || this.y < 0) { this.directionY = -this.directionY; }
                let dx = mouse.x - this.x; let dy = mouse.y - this.y; let distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < mouse.radius + this.size) {
                    if (mouse.x < this.x && this.x < canvas.width - this.size * 10) { this.x += 5; }
                    if (mouse.x > this.x && this.x > this.size * 10) { this.x -= 5; }
                    if (mouse.y < this.y && this.y < canvas.height - this.size * 10) { this.y += 5; }
                    if (mouse.y > this.y && this.y > this.size * 10) { this.y -= 5; }
                }
                this.x += this.directionX; this.y += this.directionY; this.draw();
            }
        }
        function init() {
            particlesArray = [];
            let numberOfParticles = (canvas.height * canvas.width) / 9000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2) + 1;
                let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * .4) - 0.2; let directionY = (Math.random() * .4) - 0.2;
                particlesArray.push(new Particle(x, y, directionX, directionY, size, '#C7A4FF'));
            }
        }
        function animate() { requestAnimationFrame(animate); ctx.clearRect(0, 0, innerWidth, innerHeight); for (let i = 0; i < particlesArray.length; i++) { particlesArray[i].update(); } connect(); }
        function connect() {
            let opacityValue = 1;
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                    if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                        opacityValue = 1 - (distance / 20000);
                        ctx.strokeStyle = `rgba(34, 224, 161, ${opacityValue})`; ctx.lineWidth = 1;
                        ctx.beginPath(); ctx.moveTo(particlesArray[a].x, particlesArray[a].y); ctx.lineTo(particlesArray[b].x, particlesArray[b].y); ctx.stroke();
                    }
                }
            }
        }
        window.addEventListener('resize', () => { canvas.width = innerWidth; canvas.height = innerHeight; mouse.radius = (canvas.height / 100) * (canvas.width / 100); init(); });
        window.addEventListener('mouseout', () => { mouse.x = undefined; mouse.y = undefined; });
        init(); animate();
    }

    // --- ELEMENT 1: FLUID CURSOR LOGIC ---
    const cursor = document.querySelector('.cursor');
    const cursorDot = document.querySelector('.cursor-dot');
    document.addEventListener('mousemove', e => {
        cursor.style.left = `${e.clientX}px`;
        cursor.style.top = `${e.clientY}px`;
        cursorDot.style.left = `${e.clientX}px`;
        cursorDot.style.top = `${e.clientY}px`;
    });
    document.querySelectorAll('a, button, .specialist-item, .pharmacy-logo, .category-card').forEach(el => {
        el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
        el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
    });

    // --- ELEMENT 2: LOADER LOGIC ---
    const loader = document.getElementById('loader');
    const loadPercentage = document.getElementById('load-percentage');
    let currentLoad = 0;
    const dataPointsContainer = document.querySelector('.data-points');
    if (dataPointsContainer) {
        for (let i = 0; i < 30; i++) {
            const point = document.createElement('div');
            point.className = 'data-point';
            point.style.top = `${Math.random() * 100}%`;
            point.style.left = `${Math.random() * 100}%`;
            point.style.animationDelay = `${Math.random() * 1.5}s`;
            dataPointsContainer.appendChild(point);
        }
    }
    const interval = setInterval(() => {
        currentLoad = Math.min(100, currentLoad + 1);
        if (loadPercentage) loadPercentage.textContent = currentLoad;
        if (currentLoad >= 100) {
            clearInterval(interval);
            setTimeout(() => { loader.classList.add('hidden'); }, 500);
        }
    }, 40);

    // --- ELEMENT 3: FULL-SCREEN NAVIGATION LOGIC ---
    const menuToggle = document.getElementById('menu-toggle');
    const menuCloseBtn = document.querySelector('#full-screen-nav .menu-close-btn');
    const fullScreenNav = document.getElementById('full-screen-nav');
    if (menuToggle && menuCloseBtn && fullScreenNav) {
        menuToggle.addEventListener('click', () => fullScreenNav.classList.add('active'));
        menuCloseBtn.addEventListener('click', () => fullScreenNav.classList.remove('active'));
        fullScreenNav.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => fullScreenNav.classList.remove('active'));
        });
    }

    // --- ELEMENT 4: MARQUEE LOGIC ---
    const marqueeContent = document.querySelector('.marquee-content');
    if (marqueeContent) {
        marqueeContent.innerHTML += marqueeContent.innerHTML;
    }

    // --- ELEMENT 5: SPECIALIST LIST HOVER LOGIC ---
    const specialistListContainer = document.querySelector('.specialist-list-container');
    const specialistList = document.getElementById('specialist-list');
    const imagePreview = document.getElementById('specialist-image-preview');
    const doctorData = {
        cardiologist: [{ name: 'Dr. Namo Sharma', specialty: 'Cardiologist', img: 'doc1.png' }],
        neurologist: [{ name: 'Dr. Anya Nadar', specialty: 'Neurologist', img: 'doc3(2).png' }], // FIXED FILENAME
        general: [{ name: 'Dr. Karan Kumar', specialty: 'General Practitioner', img: 'doc5.png' }]
    };
    if (specialistList) {
        const allDoctors = [...doctorData.cardiologist, ...doctorData.neurologist, ...doctorData.general];
        allDoctors.forEach(doc => {
            const li = document.createElement('li');
            li.className = 'specialist-item';
            li.dataset.image = doc.img;
            li.innerHTML = `<span>${doc.name}</span><p>${doc.specialty}</p>`;
            specialistList.appendChild(li);
        });
        specialistList.querySelectorAll('.specialist-item').forEach(item => {
            item.addEventListener('mouseenter', () => { imagePreview.innerHTML = `<img src="${item.dataset.image}" alt="Specialist photo">`; imagePreview.style.opacity = '1'; imagePreview.style.transform = 'translate(-50%, -50%) scale(1)'; });
            item.addEventListener('mouseleave', () => { imagePreview.style.opacity = '0'; imagePreview.style.transform = 'translate(-50%, -50%) scale(0.8)'; });
        });
        if (specialistListContainer) {
            specialistListContainer.addEventListener('mousemove', e => { imagePreview.style.left = `${e.clientX}px`; imagePreview.style.top = `${e.clientY}px`; });
        }
    }

    // --- MODAL HANDLING LOGIC (ROBUST VERSION) ---
    const modalOverlay = document.getElementById('modal-overlay');
    const allModals = document.querySelectorAll('.modal-container');
    const authModal = document.getElementById('auth-modal');
    const symptomModal = document.getElementById('symptom-modal');
    const openAuthBtn = document.getElementById('auth-btn-header');
    const openSymptomBtn = document.getElementById('open-symptom-checker-btn-main');

    function openModal(modal) {
        modalOverlay.classList.remove('hidden');
        modal.classList.remove('hidden');
    }

    function closeModal() {
        modalOverlay.classList.add('hidden');
        allModals.forEach(modal => modal.classList.add('hidden'));
    }
    
    if (openAuthBtn) openAuthBtn.addEventListener('click', () => openModal(authModal));
    if (openSymptomBtn) openSymptomBtn.addEventListener('click', () => {
        resetSymptomChecker();
        openModal(symptomModal);
    });
    
    modalOverlay.addEventListener('click', closeModal);
    allModals.forEach(modal => {
        modal.querySelector('.modal-close-btn')?.addEventListener('click', closeModal);
    });

    // --- AUTH MODAL SPECIFIC LOGIC ---
    if (authModal) {
        const loginView = authModal.querySelector('#login-view');
        const signupView = authModal.querySelector('#signup-view');
        authModal.querySelector('#show-signup')?.addEventListener('click', e => { e.preventDefault(); loginView.classList.remove('active'); signupView.classList.add('active'); });
        authModal.querySelector('#show-login')?.addEventListener('click', e => { e.preventDefault(); signupView.classList.remove('active'); loginView.classList.add('active'); });
        authModal.querySelector('#signup-form')?.addEventListener('submit', e => { e.preventDefault(); const name = authModal.querySelector('#signup-name').value; if(openAuthBtn) openAuthBtn.textContent = `Welcome, ${name.split(' ')[0]}!`; closeModal(); });
        authModal.querySelector('#login-form')?.addEventListener('submit', e => { e.preventDefault(); if(openAuthBtn) openAuthBtn.textContent = `My Account`; closeModal(); });
    }

    // --- SYMPTOM CHECKER SPECIFIC LOGIC ---
    if (symptomModal) {
        const symptomDatabase = {
            head: { title: "Head, Neck & Throat Symptoms", tags: ['Headache', 'Migraine', 'Dizziness', 'Sore Throat'] },
            chest: { title: "Chest & Lung Symptoms", tags: ['Chest Pain', 'Cough', 'Shortness of Breath', 'Palpitations'] },
            general: { title: "General Symptoms", tags: ['Fever', 'Chills', 'Fatigue', 'Body Aches'] }
        };
        let selectedSymptoms = [];

        function goToStep(stepNumber) {
            symptomModal.querySelectorAll('.symptom-step').forEach(step => step.classList.remove('active'));
            symptomModal.querySelector(`#step-${stepNumber}`).classList.add('active');
        }

        symptomModal.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', () => {
                const category = card.dataset.category;
                const step2 = symptomModal.querySelector('#step-2');
                const categoryData = symptomDatabase[category];
                const tagsHTML = categoryData.tags.map(tag => `<button class="symptom-tag">${tag}</button>`).join('');
                step2.innerHTML = `<h2>${categoryData.title}</h2><p>Select all that apply.</p><div class="symptom-tags-container">${tagsHTML}</div><button class="btn btn-cta" id="analyze-btn" disabled>Analyze Symptoms</button>`;
                
                const analyzeBtn = step2.querySelector('#analyze-btn');
                step2.querySelectorAll('.symptom-tag').forEach(tag => {
                    tag.addEventListener('click', () => {
                        tag.classList.toggle('active');
                        selectedSymptoms = Array.from(step2.querySelectorAll('.symptom-tag.active')).map(t => t.textContent);
                        analyzeBtn.disabled = selectedSymptoms.length === 0;
                    });
                });

                analyzeBtn.addEventListener('click', () => {
                    const step3 = symptomModal.querySelector('#step-3');
                    let advice = "Based on your symptoms, we recommend rest and hydration. For persistent issues, it is crucial to consult a General Practitioner for a professional diagnosis. This is not medical advice.";
                    if (selectedSymptoms.includes('Chest Pain')) {
                        advice = "Chest pain can be serious. Please consider seeking immediate medical attention. It is essential to consult a Cardiologist for a full evaluation. This is not medical advice.";
                    }
                    step3.innerHTML = `<h2>Analysis Complete</h2><div id="analysis-results"><h3>Initial Guidance:</h3><p id="initial-advice-text"></p></div><button id="restart-checker" class="btn btn-primary">Start Over</button>`;
                    
                    const adviceEl = step3.querySelector('#initial-advice-text');
                    let i = 0;
                    adviceEl.innerHTML = `<span class="typing-caret"></span>`;
                    function typeWriter() {
                        const adviceText = advice;
                        if (i < adviceText.length) {
                            adviceEl.innerHTML = adviceText.substring(0, i + 1) + `<span class="typing-caret"></span>`;
                            i++;
                            setTimeout(typeWriter, 30);
                        } else {
                            adviceEl.querySelector('.typing-caret')?.remove();
                        }
                    }
                    typeWriter();
                    step3.querySelector('#restart-checker').addEventListener('click', resetSymptomChecker);
                    goToStep(3);
                });
                goToStep(2);
            });
        });
        
        function resetSymptomChecker() {
            selectedSymptoms = [];
            goToStep(1);
        }
    }
});
    </script>
</body>
</html>